{"version":3,"file":"/js/list.js","mappings":"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","sources":["webpack:///./resources/js/app.js","webpack:///webpack/bootstrap","webpack:///./resources/js/blocks/list.js"],"sourcesContent":["const token = $('meta[name=\"csrf-token\"]').attr('content');\nconst upload_link = '/admin/upload/image';\n\nfunction uploadImage(image, editor) {\n\n    var data = new FormData();\n\n    data.append(\"image\", image);\n    data.append('_token', token);\n\n    $.ajax({\n        url: upload_link,\n        cache: false,\n        contentType: false,\n        processData: false,\n        data: data,\n        type: \"post\",\n        success: function(data) {\n\n            let image = `<picture>\n                <source srcSet=\"/uploads/${data.urls['webp']}\" type=\"image/webp\">\n                <img src=\"/uploads/${data.urls['original']}\" alt=\"описание\"/>\n            </picture>`;\n\n            $(editor).summernote(\"pasteHTML\", image);\n        },\n        error: function(data) {\n            console.log('error', data);\n        }\n    });\n}\n\nconst summernote_config = {\n    toolbar: [\n        ['style', ['style']],\n        ['font', ['bold', 'underline', 'clear']],\n        ['fontname', ['fontname']],\n        ['fontsize', ['fontsize']],\n        ['color', ['color']],\n        ['para', ['ul', 'ol', 'paragraph']],\n        ['table', ['table']],\n        ['insert', ['link', 'picture', 'video']],\n        ['view', ['fullscreen', 'codeview', 'help']],\n    ],\n    popover: false,\n    callbacks: {\n        onImageUpload: function(files) {\n            uploadImage(files[0], this);\n        }\n    },\n};\n\nmodule.exports = {\n    module: {\n        rules: [\n            {\n                // You can use `regexp`\n                // test: /vendor\\.js/$\n                test: /\\.css$/,\n                loader: 'exports-loader',\n                use: ['style-loader', 'css-loader']\n                // options: {\n                //     exports: 'myFunction',\n                // },\n            },\n        ],\n    },\n    token: token,\n    summernote_config: summernote_config\n};\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const { token, summernote_config } = require('../app.js');\n\n// ************\n// ************\n// REMOVE BLOCK\n// ************\n// ************\n\n$(document).on('click', '.remove-block', function (e) {\n    e.preventDefault();\n    var delete_button = $('#deleteBlock')[0];\n    delete_button.dataset.url = this.dataset.url;\n    delete_button.dataset.block_id = this.dataset.block_id;\n    return ;\n})\n\n\n$('#deleteBlock').on('click', function () {\n    var block_id = this.dataset.block_id;\n    $.ajax({\n        method: 'POST',\n        url: this.dataset.url,\n        data: {\n            _token: token\n        },\n        success: function (data) {\n            $('#confirmDeleteBlock').modal('hide');\n            $(`#${block_id}`).remove();\n            $(document).Toasts('create', {\n                class: 'bg-danger',\n                title: 'Статус',\n                subtitle: 'OK',\n                body: 'Блок удален',\n                autohide: true,\n                delay: 2e3,\n            })\n        }\n    })\n})\n\n// ************\n// ************\n// EDIT BLOCK CONTENT\n// ************\n// ************\n\n$(document).on('click', '.edit-content', function (e) {\n    $('#form_spiner').show();\n    $('.carousel').carousel()\n    // console.log(e);\n    // console.log(this.dataset.url);\n    // return false;\n    $.ajax({\n        method: 'get',\n        url: this.dataset.url,\n        // data: method == 'post' ? {'_token': token} : {},\n        success: function (data) {\n            $('#form_spiner').hide();\n\n            $('#modal_body')[0].innerHTML = data.form;\n            $('.editor').each(function (element) {\n                var id = this.id;\n                $(`#${id}`).summernote(summernote_config);\n                $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n                $(`#${id}`).on(\"summernote.change\", function (e) {   // callback as jquery custom event\n                    $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n                });\n            })\n\n            $(\".iterations\").sortable({\n                containment: \"parent\",\n                items: \"> div\",\n                handle: \".move\",\n                tolerance: \"pointer\",\n                cursor: \"move\",\n                opacity: 0.7,\n                revert: 300,\n                placeholder: \"movable-placeholder\",\n                start: function(e, ui) {\n                    alert(2)\n                    ui.placeholder.height(ui.item[0].clientHeight);\n                    ui.placeholder.width(ui.item[0].clientWidth * .8);\n                },\n                update: function( event, ui ) {\n                    alert(0)\n                    for (let i = 0; i < event.target.children.length; i++) {\n                        $(event.target.children[i]).find('input.order')[0].value = i+1;\n                    }\n                },\n            });\n            $(\".iterations\").disableSelection();\n            // $(\".iterations\").sortable({\n            //     items: \"> div\",\n            //     tolerance: \"pointer\",\n            //     containment: \"parent\",\n            //     cursor: \"move\",\n            //     opacity: 0.7,\n            //     revert: 300,\n            //     delay: 150,\n            //     placeholder: \"movable-placeholder\",\n            //     start: function(e, ui) {\n            //         ui.placeholder.height(ui.helper.outerHeight());\n            //     },\n            //\n            // });\n\n        }\n    })\n})\n\n// ************\n// ************\n// UPDATE BLOCK STATUS\n// ************\n// ************\n\n$(document).on('change', '.enable-block-switcher', function (){\n    var switcher = this, class_name, body;\n    $(`#${this.dataset.block_id} .overlay`).show();\n    $.ajax({\n        method: 'POST',\n        url: this.dataset.url,\n        data: {\n            _token: token,\n            enabled: this.checked*1\n        },\n        success: function (data) {\n            // $(`#${switcher.dataset.block_id}`)[0].outerHTML = data.html;\n            if(switcher.checked) {\n                class_name = 'bg-success';\n                body = 'Блок включен';\n            } else {\n                class_name = 'bg-danger';\n                body = 'Блок выключен';\n            }\n\n            $('#blockList').sortable('destroy');\n            $('#blockList')[0].outerHTML = data.html;\n            refreshSortable();\n\n            $(document).Toasts('create', {\n                class: class_name,\n                title: 'Статус',\n                subtitle: 'OK',\n                body: body,\n                autohide: true,\n                delay: 2e3,\n            })\n        }\n    })\n})\n\n$(document).on('click', '.save-content', function (e) {\n    $('#form_spiner').show();\n    var close_form = this.dataset.close_form;\n    var form = $('#contentForm')[0];\n    // $('.textarea .ql-editor').each(function () {\n    $('.editor').each(function () {\n        var id = this.id;\n        // console.log($(`#${id}`));\n        $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n        // $(`#hidden_${this.id}`)[0].value = Quill.find(this).root.innerHTML\n        // console.log(this.innerHTML)\n    })\n\n    // for(data_id in CKEDITOR.instances) {\n    //     let data =  CKEDITOR.instances[data_id].getData();\n    //     let textarea_element = $(`#${data_id}`)[0];\n    //\n    //     textarea_element.value = data;\n    // }\n    // CKEDITOR.instances.each(function () {\n    //\n    // })\n    var formData = new FormData(form);\n    formData.append('_token', token)\n    $.ajax({\n        method: 'POST',\n        url: form.action,\n        data: formData,\n        dataType:'JSON',\n        contentType: false,\n        cache: false,\n        processData: false,\n        success: function (data) {\n            $('#form_spiner').hide();\n            // console.log(data);\n            if(data.errors) {\n\n                // alert.show()\n                // $.each(data.errors, function (key,value) {\n                //     alert.append(`<p>${value}</p>`);\n                // })\n            } else if(data.status) {\n                if(close_form) {\n                    $('#contentFormModal').modal('toggle');\n                }\n                $(document).Toasts('create', {\n                    class: data.toasts.class,\n                    title: data.toasts.title,\n                    body: data.toasts.body,\n                    position: 'bottomRight',\n                })\n            }\n        }\n    })\n})\n\n$(document).on('click', '.add-iteration', function (e) {\n    $.ajax({\n        method: 'GET',\n        url: this.dataset.template_url,\n        success: (data) => {\n            let element = document.createElement('template');\n            let id = `template_${parseInt(Math.random()*1e5)}`;\n\n            this.previousElementSibling.append(element);\n            element.outerHTML = data.html;\n\n            // console.log(this.previousElementSibling)\n            for (let i = 0; i < this.previousElementSibling.children.length; i++) {\n                $(this.previousElementSibling.children[i]).find('input.order')[0].value = i+1;\n            }\n            // $('.iterations').each((i, e) => {\n            //     console.log(i,e)\n            // })\n            // for (let i = 0; i < event.target.children.length; i++) {\n            //     $(event.target.children[i]).find('input.order')[0].value = i+1;\n            // }\n\n\n            $(`#option_editor_${data.u_id} .editor`).each(function (element) {\n                var id = this.id;\n                $(`#${id}`).summernote(summernote_config);\n                $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n                $(`#${id}`).on(\"summernote.change\", function (e) {   // callback as jquery custom event\n                    $(`#${id}`)[0].value = $(`#${id}`).summernote('code');\n                });\n            })\n        }\n    })\n})\n\n$(document).on('change','.custom-file-input', function (){\n    var id = this.dataset.id;\n    var fr = new FileReader();\n    var selectedFile = this.files[0];\n\n    if (selectedFile) {\n        fr.readAsDataURL(selectedFile)\n        fr.onload = function(e) {\n            var img = document.getElementById(`image_${id}`)\n            $(img).show();\n            img.src = this.result\n        }\n    }\n})\n\n// ************\n// ************\n// SORT AND DRAG BLOCK\n// ************\n// ************\n\nfunction refreshSortable() {\n    $( \"#blockList\" ).sortable({\n        revert: true,\n        update: function( event, ui ) {\n            var sortedIDs = $( \"#blockList\" ).sortable( \"toArray\" );\n            $.ajax({\n                method: 'POST',\n                url: block_update_order_form_action,\n                data: {\n                    _token: token,\n                    sequence: sortedIDs\n                },\n                success: function (data) {\n                    $('#blockList').sortable('destroy');\n                    $('#blockList')[0].outerHTML = data.html;\n                    refreshSortable();\n                    $(document).Toasts('create', {\n                        class: 'bg-success',\n                        title: 'Статус',\n                        subtitle: 'OK',\n                        body: 'Последовательность блоков на странице успешно изменена',\n                        autohide: true,\n                        delay: 2e3,\n                    })\n                }\n            })\n        }\n    }).disableSelection();\n}\nrefreshSortable();\n\n$( \".template-item\" ).draggable({\n    connectToSortable: \"#blockList\",\n    helper: \"clone\",\n    stop: function( event, ui ) {\n        $.ajax({\n            method: 'POST',\n            url: block_create_content_form_action,\n            data: {\n                _token: token,\n                enabled: 1,\n                block_template_id: event.target.dataset.template_id\n            },\n            success: function (data) {\n                if(data.errors) {\n\n                } else if(data.status) {\n                    $('#blockList').sortable('destroy');\n                    ui.helper[0].innerHTML = data.html;\n                    ui.helper[0].id = data.block_id;\n\n                    refreshSortable();\n                }\n            }\n        })\n    }\n});\n\n\n$(document).on('click', '.content.remove-iteration', function (e) {\n    e.preventDefault()\n\n    if(confirm('Are you sure?')) {\n        $.ajax({\n            method: 'DELETE',\n            data: {\n                _token: token,\n            },\n            url: this.dataset.url,\n            success: (data) => {\n                $(`#${data.id}`).remove();\n                $(document).Toasts('create', {\n                    class: data.toasts.class,\n                    title: data.toasts.title,\n                    body: data.toasts.body,\n                    position: 'bottomRight',\n                })\n            }\n        })\n    }\n    return false;\n})\n\n$(document).on('click', '.content.remove-new-iteration', function (e) {\n    e.preventDefault();\n    $(`#${this.dataset.id}`).remove();\n    return false;\n})\n\n\n$(document).on('click', '.block.clear-value', function () {\n    $(`#optionFile_${this.dataset.attr_id}`)[0].value = '';\n    $(`#image_${this.dataset.attr_id}`)[0].src = '';\n    $(`#image_${this.dataset.attr_id}`).hide();\n    $('#contentForm').append(`<input type=\"hidden\" name=\"clear_value[]\" value=\"${this.dataset.prop_id}\">`);\n})\n"],"names":["token","$","attr","summernote_config","toolbar","popover","callbacks","onImageUpload","files","image","editor","data","this","FormData","append","ajax","url","cache","contentType","processData","type","success","urls","summernote","error","console","log","module","exports","rules","test","loader","use","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","require","refreshSortable","sortable","revert","update","event","ui","sortedIDs","method","block_update_order_form_action","_token","sequence","outerHTML","html","document","Toasts","class","title","subtitle","body","autohide","delay","disableSelection","on","e","preventDefault","delete_button","dataset","block_id","modal","remove","show","carousel","hide","innerHTML","form","each","element","id","value","containment","items","handle","tolerance","cursor","opacity","placeholder","start","alert","height","item","clientHeight","width","clientWidth","i","target","children","length","find","class_name","switcher","enabled","checked","close_form","formData","action","dataType","errors","status","toasts","position","template_url","createElement","parseInt","Math","random","previousElementSibling","u_id","fr","FileReader","selectedFile","readAsDataURL","onload","img","getElementById","src","result","draggable","connectToSortable","helper","stop","block_create_content_form_action","block_template_id","template_id","confirm","attr_id","prop_id"],"sourceRoot":""}